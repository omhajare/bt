---------topper->

npm init -y

npm install --save-dev hardhat@2.22.2

mkdir test

mkdir scripts

mkdir contracts

create hardhat.config.js  -> require("@nomicfoundation/hardhat-toolbox");

module.exports = {
  solidity:Â "0.8.24",
};


npm install --save-dev @nomicfoundation/hardhat-toolbox

contracts/WavrPortal.sol -> // SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract WavePortal {
    uint256 totalWaves;

    event NewWave(address indexed from, uint256 timestamp, string message);

    struct Wave {
        address waver;
        string message;
        uint256 timestamp;
    }

    Wave[] waves;

    constructor() {
        totalWaves = 0;
    }

    function wave(string memory _message) public {
        totalWaves += 1;
        waves.push(Wave(msg.sender, _message, block.timestamp));
        emit NewWave(msg.sender, block.timestamp, _message);
    }

    function getTotalWaves() public view returns (uint256) {
        return totalWaves;
    }

    function getAllWaves() public view returns (Wave[] memory) {
        returnÂ waves;
Â Â Â Â }
}



scripts/deploy.js -> async function main() {
  const WavePortal = await ethers.getContractFactory("WavePortal");
  const wavePortal = await WavePortal.deploy();

  await wavePortal.waitForDeployment();

  console.log("âœ… WavePortal deployed to:", wavePortal.target);
  process.exit(0);
}

main().catch((error) => {
  console.error(error);
  process.exitCodeÂ =Â 1;
});


npx hardhat compile

npx hardhat node

new terminal ->>>>

npx hardhat run scripts/deploy.js --networkÂ localhost



scripts/interact.js -> const { ethers } = require("hardhat");

async function main() {
  const contractAddress = "0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9"; // replace this

  const WavePortal = await ethers.getContractFactory("WavePortal");
  const wavePortal = await WavePortal.attach(contractAddress);

  console.log("Sending a wave...");
  const waveTxn = await wavePortal.wave("Hello from Sarthak!");
  await waveTxn.wait();

  const count = await wavePortal.getTotalWaves();
  console.log("Total number of waves:", Number(count));
}

main().catch((error) => {
  console.error(error);
  process.exit(1);
});
 

npx hardhat run scripts/interact.js --networkÂ localhost















-------V-way-> 

Assignment 2: Build and Deploy a Smart Contract Locally Using Hardhat
Refer this chat works perfectly : https://chatgpt.com/share/68f5f98c-f054-8012-b406-bfb15edadbad

Step-by-Step Setup
ðŸª„ Step 1 â€” Install Requirements
Make sure you have:
Node.js (download from https://nodejs.org)


VS Code


To check if Node.js and npm are installed:
node -v
npm -v

Or install Latest version of node which is 22:


Node install 22

Step 2 â€” Create Project Folder
Open your terminal and run:
# Step 1: Create a new folder and go inside it
mkdir Exp2_hardhat
cd Exp2_hardhat

# Step 2: Initialize npm project
npm init -y

# Step 3: Initialize a new Hardhat project
npx hardhat --init
When prompted:
Choose hardhat-2


Path: .


Project type: mocha-ethers-js


It will suggest installing dependencies â€” press Y


This automatically installs all needed packages like hardhat, ethers, chai, etc.

Step 4. Write the Smart Contract
Now create your own contract named WavePortal.sol
ðŸ“ Create file:
 contracts/WavePortal.sol
âœï¸ Add this code:
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract WavePortal {
    uint256 totalWaves;  // to keep count of total waves

    event NewWave(address indexed from, uint256 timestamp);

    function wave() public {
        totalWaves += 1;
        emit NewWave(msg.sender, block.timestamp);
    }

    function getTotalWaves() public view returns (uint256) {
        return totalWaves;
    }
}

Step 5. Compile the Contract
Run:
npx hardhat compile
âœ… If everythingâ€™s fine, youâ€™ll see:
Compiled 1 Solidity file successfully

This means Hardhat converted your Solidity code into bytecode + ABI (needed for deployment).
ðŸš€ Step 6. Deploy the Contract Locally
Weâ€™ll now deploy it to Hardhatâ€™s built-in local blockchain (which runs in memory).
ðŸ“ add the script: scripts/deploy.js
âœï¸ Replace content with:
const { ethers } = require("hardhat");

async function main() {
  const WavePortal = await ethers.getContractFactory("WavePortal");
  const wavePortal = await WavePortal.deploy();

  await wavePortal.waitForDeployment();
  console.log("WavePortal deployed to:", wavePortal.target);

  let count = await wavePortal.getTotalWaves();
  console.log("Total waves:", count.toString());

  const waveTxn = await wavePortal.wave();
  await waveTxn.wait();

  count = await wavePortal.getTotalWaves();
  console.log("Total waves after waving:", count.toString());
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });

Step 7. Run the Deployment Script
Now deploy locally:
npx hardhat run scripts/deploy.js

âœ… Output should look like:
WavePortal deployed to: 0x5FbDB2315678afecb367f032d93F642f64180aa3
Total waves: 0
Total waves after waving: 1

This means:
Your contract is successfully deployed.


You called wave() once, and total waves = 1.
Step 8. Interact Using Hardhat Console
To manually interact:
npx hardhat console

Then inside console:
const WavePortal = await ethers.getContractFactory("WavePortal");
const wavePortal = await WavePortal.deploy();
await wavePortal.waitForDeployment();

// check waves count
(await wavePortal.getTotalWaves()).toString();

// send a wave
await wavePortal.wave();

// check again
(await wavePortal.getTotalWaves()).toString();

âœ… Output:
'0'
'1'

ðŸŽ‰ This confirms your smart contract is working correctly.
We successfully built and deployed a smart contract locally using Hardhat and interacted with it through console commands.
